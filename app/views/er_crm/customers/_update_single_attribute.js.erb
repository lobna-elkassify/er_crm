<%if attribute_name=="zip_code" %>
  <%zip = ZipCode.where(zip: @lead.zip_code).limit(1).first%>
  <%if(zip.present?)%>
    var city_div = $("span.js-edit.city").find("div");
    var state_div = $("span.js-edit.state_name").find("div");
    city_div.html("<%= zip.city%>");
    state_div.html("<%= zip.state.name %>");
  <%end%>
<%end%>

var target = $("a.icn-save.<%= attribute_name %>");
var parent = target.parent("span.js-upload");
var element_to_show = parent.prev("span.js-edit");
var hidden_to_update = element_to_show.children(":hidden");
var success_message_div = element_to_show.find(".success_msg");

parent.addClass("hidden");
element_to_show.find(".field_value").html("<%= attribute_value%>");

hidden_to_update.val("<%= attribute_value %>");
element_to_show.removeClass("hidden");

var error_message_div = target.siblings("span");
error_message_div.addClass("hidden")

var success_message = "<%= attribute_name.humanize %> has been updated successfully" ;
success_message_div.html(success_message).removeClass("hidden")